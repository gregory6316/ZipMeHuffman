# ZipMeHuffman
### Запуск:  
```
python3 huffman.py
```  
При запуске появится 3 опции: 1 - архивирование, 2 - разархивирование, 3 - выход.  
При выборе 1-ой или второй опции нужно указать путь к файлу, который нужно сжать(распаковать), файл будет сохранен в том же каталоге что и исходный.  

### Алгоритм  
1) Читаем файл
2) Находим частоту байтов
3) При помощи сортировки кучей сортируем узлы нашего дерева и получаем кодирование
4) Кодируем текст
5) Последний байт и формат исходного файла записываем в словарь кучи и дампим при помощи pickle данный словарь и закодированный текст в файл .zmh.   
При декодировании читаем текст и словарь, текст преобразуем в двоичный формат и заменяем последний байт на байт из словаря, строим дерево и по нему декодируем.

### Результаты сраввнения  
|                        | Исходный размер, байты | ZIP, байты | ZIP, после сжатия, % | 7ZIP, байты | 7ZIP, после сжатия, % | GZIP, байты | GZIP, после сжатия, % | Huffman, байты | Huffman, после сжатия, % |
|------------------------|------------------------|------------|----------------------|-------------|-----------------------|-------------|-----------------------|----------------|--------------------------|
| sample_text_short.txt  |           22           |     172    |         781,8        |     198     |         872,7         |     147     |         668,1         | 118            | 536,3                    |
| sample_text_big.txt    |          15869         |    6 613   |         41,6         |    6 519    |          41,0         |    6 756    |          42,5         | 9 068          | 57,1                     |
| sample_sound_short.wav |         389 670        |   286 451  |         73,5         |   197 632   |          50,7         |   294 197   |          75,4         | 334 820        | 85,9                     |
| sample_sound_long.wav  |       18 658 426       | 18 354 347 |         98,3         |  15 241 300 |          81,6         |  18 345 083 |          98,3         | 18 374 431     | 98,4                     |
| sample_image.png       |          2 680         |    2 813   |         104,9        |    2 761    |         103,0         |    2 794    |         104,2         | 3 706          | 138,2                    |

  
Тесты проводились при помощи утилиты keka в стандартном редиме.  
По реузультатам можем увидеть, что все архиваторы провалились при сжатии маленького текстового файла, это связано с тем, что архиваторы как и реализация huffman.py также сохраняют различные данные, нужные для распаковки(версия архиватора, типы данных, список файлов и т.д). Также архиваторы показали плохой реузльтат при сжатии png, тоже очевидный результат, так как png - формат, использующий сжатие без потерь, соответственно дальнейшее сжатие не очень эффективно. В остальных случаях huffman.py показывает себя хуже остальных архиваторов, во многом это связано с тем, что современные архиваторы используют алгоритм Deflate, который включает в себя кодирование Хаффмана и LZ77. В данном случае файлы кодируются поблочно при помощи кодирования Хаффмана, при этом  в блоках предварительно заменяются повторяющиеся строки(LZ77), что и дает преимущество.
